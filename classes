import os
import django
from django.db import transaction

# Set up the Django environment
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sinapi.settings')
django.setup()

from compositions.models import State  # Importing the State model

# List of Brazilian state shorthands
brazilian_states = [
    'AC', 'AL', 'AP', 'AM',
    'BA', 'CE', 'DF', 'ES',
    'GO', 'MA', 'MT', 'MS',
    'MG', 'PA', 'PB', 'PR',
    'PE', 'PI', 'RJ', 'RN',
    'RO', 'RR', 'SC', 'SE',
    'TO'
]

# Atomic database transaction
with transaction.atomic():
    for state in brazilian_states:
        # Skip the states that already exist
        if State.objects.filter(name=state).exists():
            print(f"State {state} already exists.")
            continue
        # Create new state
        State.objects.create(name=state)
        print(f"State {state} added.")

print("Brazilian states have been updated.")
